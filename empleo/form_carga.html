<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cargar CV u Oferta</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .tabs { display: flex; margin-bottom: 10px; }
    .tab {
      flex: 1; padding: 10px; text-align: center; cursor: pointer;
      background: #eee; border: 1px solid #ccc; border-bottom: none;
    }
    .tab.active { background: #fff; font-weight: bold; }
    .form-container { border: 1px solid #ccc; padding: 20px; background: #fff; }
    .form-group { margin-bottom: 12px; }
    label { display: block; margin-bottom: 5px; }
    input, textarea, select { width: 100%; padding: 6px; }
    .hidden { display: none; }
    .success { color: green; margin: 10px 0; }
    .error { color: darkred; margin: 10px 0; }
    .btn { background: #228b22; color: #fff; border: none; padding: 10px 18px; cursor: pointer; margin-top: 8px; }
  </style>
</head>
<body>
  <h2>Cargar CV u Oferta</h2>
  <div class="tabs">
    <div class="tab active" id="tab-cv" onclick="showTab('cv')">Cargar CV</div>
    <div class="tab" id="tab-oferta" onclick="showTab('oferta')">Cargar Oferta</div>
  </div>
  <div class="form-container">
    <!-- Formulario CV -->
    <form id="form-cv" onsubmit="return enviarFormulario(this, 'cv')">
      <input type="hidden" name="tipo" value="cv">
      <div class="form-group"><label>Nombre</label><input name="nombre" required></div>
      <div class="form-group"><label>Fecha de nacimiento</label><input name="fecha_nacimiento" type="date"></div>
      <div class="form-group"><label>Edad</label><input name="edad" type="number" min="0"></div>
      <div class="form-group"><label>Email</label><input name="email" type="email" required></div>
      <div class="form-group"><label>Foto (URL)</label><input name="foto" type="url"></div>
      <div class="form-group"><label>Presentación</label><textarea name="presentacion"></textarea></div>
      <div class="form-group"><label>Experiencia</label><textarea name="experiencia"></textarea></div>
      <div class="form-group"><label>Educación</label><textarea name="educacion"></textarea></div>
      <div class="form-group"><label>Habilidades</label><textarea name="habilidades"></textarea></div>
      <div class="form-group"><label>Área</label><input name="area"></div>
      <div class="form-group"><label>Categoría</label><input name="categoria"></div>
      <div class="form-group"><label>Puesto</label><input name="puesto"></div>
      <div class="form-group"><label>Zona</label><input name="zona"></div>
      <div class="form-group"><label>Verificado</label><input name="verificado"></div>
      <button class="btn" type="submit">Enviar CV</button>
      <div id="msg-cv"></div>
    </form>
    <!-- Formulario Oferta -->
    <form id="form-oferta" class="hidden" onsubmit="return enviarFormulario(this, 'oferta')">
      <input type="hidden" name="tipo" value="oferta">
      <div class="form-group"><label>Email</label><input name="email" type="email" required></div>
      <div class="form-group"><label>Título</label><input name="titulo" required></div>
      <div class="form-group"><label>Empresa</label><input name="empresa"></div>
      <div class="form-group"><label>Descripción</label><textarea name="descripcion"></textarea></div>
      <div class="form-group"><label>Requisitos</label><textarea name="requisitos"></textarea></div>
      <div class="form-group"><label>Área</label><input name="area"></div>
      <div class="form-group"><label>Zona</label><input name="zona"></div>
      <div class="form-group"><label>Verificado</label><input name="verificado"></div>
      <button class="btn" type="submit">Enviar Oferta</button>
      <div id="msg-oferta"></div>
    </form>
  </div>
  <script>
    function showTab(tipo) {
      document.getElementById('tab-cv').classList.toggle('active', tipo === 'cv');
      document.getElementById('tab-oferta').classList.toggle('active', tipo === 'oferta');
      document.getElementById('form-cv').classList.toggle('hidden', tipo !== 'cv');
      document.getElementById('form-oferta').classList.toggle('hidden', tipo !== 'oferta');
    }

    function enviarFormulario(form, tipo) {
      var msgDiv = document.getElementById('msg-' + tipo);
      msgDiv.textContent = '';
      msgDiv.className = '';

      var url = "TU_URL_DE_APPS_SCRIPT_AQUI"; // Pega aquí la URL de tu Apps Script Web App
      var formData = new FormData(form);

      fetch(url, {
        method: "POST",
        body: formData
      }).then(r => r.text())
        .then(txt => {
          if (txt.indexOf("ERROR") === 0) {
            msgDiv.textContent = "Error: " + txt;
            msgDiv.className = "error";
          } else {
            msgDiv.textContent = "¡Enviado correctamente!";
            msgDiv.className = "success";
            form.reset();
          }
        })
        .catch(err => {
          msgDiv.textContent = "Error de red o servidor: " + err;
          msgDiv.className = "error";
        });
      return false;
    }
  </script>
</body>
</html>
