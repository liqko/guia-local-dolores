<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Agenda Deportiva</title><link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet"><style>body{background:transparent;font-family:'Segoe UI','Arial',sans-serif;font-style:italic;margin:0;padding:0;overflow-x:hidden}.header-flex{display:flex;justify-content:center;align-items:center;gap:18px;margin-top:28px;margin-bottom:0;flex-wrap:wrap;width:100%}.main-logo,.secondary-logo{width:110px;height:110px;border-radius:18px;box-shadow:0 2px 10px rgba(44,60,90,0.10);background:#fff;object-fit:cover;display:block;transition:width .2s,height .2s}.header-title{font-size:2.1em;font-weight:800;color:#2b3a55;letter-spacing:1px;font-style:italic;text-align:center;margin:0;flex:1 1 240px;min-width:120px;max-width:400px;word-break:break-word;background:#f3f6fb;border-radius:14px;border:1.5px solid #e2e8f0;padding:14px 22px;box-shadow:0 2px 12px rgba(44,60,90,0.08)}.search-container{display:flex;justify-content:center;margin-top:18px;margin-bottom:0}.search-box{width:320px;padding:12px 18px;font-size:1.08em;border:1.5px solid #d2d7e1;border-radius:12px;outline:none;margin-bottom:12px;box-shadow:0 2px 7px rgba(44,60,90,0.05);background:#fff}.search-box:focus{border-color:#3b7dd8}.events-container{display:flex;flex-direction:column;align-items:center;gap:25px;padding:30px 16px;min-height:300px;font-style:italic}.event-card{width:100%;max-width:420px;margin:0 auto;background:#fff;border-radius:18px;box-shadow:0 4px 16px rgba(60,80,120,0.08);padding:24px 16px;display:flex;flex-direction:column;gap:7px}.event-logos-row{display:flex;gap:12px;margin-bottom:10px;justify-content:center;align-items:center;flex-wrap:wrap}.event-logo-organizer-block{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:0 7px;max-width:150px;flex:1 1 120px}.event-logo-main{max-width:110px;max-height:110px;width:110px;height:110px;border-radius:14px;object-fit:contain;background:#f5f5f5;box-shadow:0 2px 10px rgba(44,60,90,0.12);display:block;margin-bottom:7px;margin-left:auto;margin-right:auto;transition:width .2s,height .2s}.event-main-organizer{font-size:1em;color:#16335a;font-weight:500;text-align:center;word-break:break-word;overflow-wrap:break-word;margin:0 5px;margin-bottom:0;margin-top:0;line-height:1.2;max-width:140px;white-space:pre-line;display:block}.event-logo{max-width:54px;max-height:54px;border-radius:9px;object-fit:contain;background:#f5f5f5;box-shadow:0 2px 10px rgba(44,60,90,0.08);display:block}.event-title{font-size:1.25em;font-weight:bold;color:#16335a;margin:0;font-style:italic;text-align:left;display:block}.event-date-row{display:flex;align-items:center;gap:8px;margin-bottom:2px}.event-date{color:#3b7dd8;font-weight:600;font-size:1em;display:inline-block}.event-time{color:#0e5076;font-weight:500;font-size:.97em;display:inline-block}.event-info-row,.event-info-row.event-value,.event-description{display:flex;align-items:flex-start;gap:8px;padding-left:0;position:static}.event-info-row .icon,.event-value .icon,.event-info-adicional .icon,.event-description .desc-icon{position:static;font-size:1.3em;color:#3b7dd8;min-width:1.4em;text-align:center;display:inline-flex;align-items:center;justify-content:flex-start;vertical-align:middle;margin-bottom:0!important;line-height:1!important;margin-right:6px}.event-info-row span{display:inline-block;vertical-align:middle}.event-category-block{display:flex;flex-direction:column;gap:7px;align-items:flex-start;margin-bottom:7px;margin-top:3px}.event-deporte{font-size:1.08em;background:#f1f5fd;border-radius:7px;padding:3px 10px;color:#3b7dd8;font-weight:600;display:inline-block;font-style:italic;word-break:break-word;overflow-wrap:break-word;margin-bottom:0}.event-category{font-size:1.08em;background:#e3e3fa;border-radius:7px;padding:3px 10px;color:#6d3bd8;font-weight:600;display:inline-block;font-style:italic;word-break:break-word;overflow-wrap:break-word;margin-top:3px}.event-deporte i{margin-right:5px;color:#1a6d2a;font-size:1.1em}.event-category i{margin-right:5px;color:#6d3bd8;font-size:1.1em}.event-location{color:#3d475a;font-size:1em}.event-organizer{color:#5a5a5a;font-size:.99em}.event-description{color:#444;margin-bottom:0;font-size:.98em;text-align:justify;font-style:italic;margin-top:7px;word-break:break-word;overflow-wrap:break-word}.event-description p{margin-top:.5em;margin-bottom:.5em;display:inline}.event-value{color:#29853b;font-weight:600;font-size:1em}.event-info-adicional{display:flex;align-items:flex-start;gap:8px;color:#22529a;font-size:1em;font-style:italic;margin-top:0;margin-bottom:0;padding-left:0;font-weight:600;word-break:break-word;overflow-wrap:break-word;line-height:1.3}.event-info-adicional .icon{font-size:1.3em;color:#22529a;min-width:1.4em;text-align:center;display:inline-flex;align-items:center;justify-content:flex-start;vertical-align:middle;margin-bottom:0!important;line-height:1!important;margin-right:6px}.event-sponsors{color:#1d2c53;background:#e6eaf7;border-radius:7px;padding:7px 10px;margin-top:6px;font-size:.98em;font-style:italic;font-weight:500;word-break:break-word;overflow-wrap:break-word}.event-link{display:inline-block;margin-top:10px;color:#fff;background:#3b7dd8;border:none;text-decoration:none;font-size:1em;word-break:break-word;overflow-wrap:break-word;cursor:pointer;padding:8px 18px;border-radius:9px;font-weight:600;transition:background .2s}.event-link:hover{background:#22529a;color:#fff;text-decoration:underline}.paginator{background:#f3f6fb;border-radius:14px;border:1.5px solid #e2e8f0;padding:10px 18px;box-shadow:0 2px 12px rgba(44,60,90,0.08);margin-bottom:14px;margin-top:12px;display:flex;justify-content:center;align-items:center;gap:14px;font-style:italic}.paginator button{padding:7px 18px;font-size:1em;border:none;background:#3b7dd8;color:#fff;border-radius:8px;cursor:pointer;font-weight:600;box-shadow:0 2px 7px rgba(44,60,90,0.05)}.paginator button[disabled]{background:#b5c9e4;cursor:not-allowed}.paginator .page-info{font-size:1.06em;color:#222;font-weight:500;min-width:55px;text-align:center;font-style:italic}.footer-zocalo{width:100%;min-width:unset;max-width:unset;background:#2b3a55;display:flex;justify-content:center;align-items:flex-end;gap:60px;padding:28px 0 20px 0;z-index:100;margin-top:22px;border-top-left-radius:20px;border-top-right-radius:20px}.footer-zocalo-item{display:grid;grid-template-rows:min-content auto;align-items:end;justify-items:center;min-width:130px;min-height:140px;text-align:center;flex:1 1 130px;max-width:180px}.footer-zocalo a{color:#fff;text-decoration:none;font-size:2.9em;transition:color .2s;padding:0 10px;display:flex;align-items:center;justify-content:center}.footer-zocalo a:hover img{box-shadow:0 0 0 3px #ffb933}.footer-zocalo img{width:70px;height:70px;object-fit:contain;display:block;border-radius:13px;background:#fff;box-shadow:0 2px 10px rgba(44,60,90,0.08);padding:7px;margin-bottom:12px}.footer-zocalo-label{color:#fff;font-size:1.18em;font-weight:500;font-style:italic;line-height:1.13;letter-spacing:.02em;text-shadow:0 2px 10px #2b3a5544;margin:0;min-height:34px}@media (max-width:900px){.footer-zocalo{gap:24px;padding:18px 0 10px 0;border-radius:0}.footer-zocalo img{width:48px;height:48px;padding:4px}.footer-zocalo-item{min-width:unset;min-height:unset}.event-card{max-width:calc(100% - 32px);padding:18px 12px}.events-container{padding:18px 8px}.main-logo,.secondary-logo{width:80px;height:80px}.event-logo-main{width:80px;height:80px;max-width:80px;max-height:80px}}@media (max-width:600px){.footer-zocalo{gap:8px;flex-direction:column;padding:14px 0 8px 0;border-radius:0;width:100%;min-width:unset;max-width:unset}.footer-zocalo-item{min-width:unset;min-height:unset;width:100%;max-width:99vw;margin-bottom:5px}.footer-zocalo img{width:48px;height:48px;padding:4px}.event-card{max-width:calc(100% - 18px);width:100%;padding:12px 7px}.header-title{font-size:1.35em;padding:8px 9px}.events-container{padding:12px 5px}.main-logo,.secondary-logo{width:60px;height:60px}.event-logo-main{width:60px;height:60px;max-width:60px;max-height:60px}}#enlaceModal{display:none;position:fixed;z-index:9999;top:0;left:0;width:100vw;height:100vh;background:#2b3a5580;align-items:center;justify-content:center}#modalContent{position:relative;width:100vw;height:100vh;max-width:100vw;max-height:100vh;margin:0;background:#fff;border-radius:0;box-shadow:0 4px 32px #2226;display:flex;flex-direction:column}#cerrarModal{position:absolute;top:18px;right:18px;background:#3b7dd8;color:#fff;border:none;border-radius:50%;width:36px;height:36px;font-size:2em;cursor:pointer;z-index:10;display:flex;align-items:center;justify-content:center}#modalIframe{width:100%;height:100%;border:none;flex:1;background:#ebedf5}</style></head><body><div class="header-flex"><img src="https://raw.githubusercontent.com/liqko/guia-local-dolores/refs/heads/main/img/plataforma/DEPORTIVA.png" alt="Logo Principal" class="main-logo" /><h1 class="header-title">Agenda Deportiva</h1></div><div class="search-container"><input type="text" id="search" class="search-box" placeholder="Buscar por fecha, deporte, categoría, nombre, organizador..."></div><div id="loading-indicator" style="display:none; text-align:center; font-size:1.2em; color:#22529a; margin-top:20px;"><span id="loading-spinner" style="font-size:2em;">⏳</span> Cargando eventos deportivos...</div><div id="retry-container" style="display:none; text-align:center; margin-top:20px;"><button onclick="loadAgenda(true)" style="background:#3b7dd8; color:#fff; border:none; border-radius:8px; padding:8px 20px; font-size:1em; font-weight:600;">Reintentar</button></div><div class="events-container" id="events"></div><div class="paginator" id="paginator"></div><div class="footer-zocalo"><div class="footer-zocalo-item"><a href="https://www.guialocaldolores.com.ar/actividades" target="_blank" title="Actividades"><img src="https://raw.githubusercontent.com/liqko/guia-local-dolores/refs/heads/main/img/plataforma/ACTIVIDADES.png" alt="Actividades"/></a><div class="footer-zocalo-label">Actividades</div></div><div class="footer-zocalo-item"><a href="https://www.guialocaldolores.com.ar/eventos" target="_blank" title="Eventos"><img src="https://raw.githubusercontent.com/liqko/guia-local-dolores/refs/heads/main/img/plataforma/eventos.png" alt="Eventos"/></a><div class="footer-zocalo-label">Eventos</div></div><div class="footer-zocalo-item"><a href="https://www.guialocaldolores.com.ar/capacitacion" target="_blank" title="Capacitación"><img src="https://raw.githubusercontent.com/liqko/guia-local-dolores/refs/heads/main/img/plataforma/CAPACITACION.png" alt="Capacitación"/></a><div class="footer-zocalo-label">Capacitación</div></div></div><div id="enlaceModal"><div id="modalContent"><button id="cerrarModal">&times;</button><iframe id="modalIframe" src=""></iframe></div></div><script>function normalizar(e){return(e||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}function esAprobado(e){return!(!e)||(e=e.toString().trim().toLowerCase(),["si","sí","✓","✔","✅","x","ok","true"].some(t=>e===t))}function formatoFechaCompleto(e){if(!e)return"";let t;if(/^Date\((\d+),(\d+),(\d+)\)$/.test(e)){const r=e.match(/^Date\((\d+),(\d+),(\d+)\)$/);t=new Date(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10))}else if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const[r,a,n]=e.split("-");t=new Date(parseInt(r,10),parseInt(a,10)-1,parseInt(n,10))}else if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e)){const[a,n,r]=e.split("/");t=new Date(parseInt(r,10),parseInt(n,10)-1,parseInt(a,10))}else if(/^\d+$/.test(e)){t=new Date(1899,11,30),t.setDate(t.getDate()+parseInt(e,10))}else return e;const o=["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],i=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];return o[t.getDay()].charAt(0).toUpperCase()+o[t.getDay()].slice(1)+" "+t.getDate()+" de "+i[t.getMonth()]+" de "+t.getFullYear()}function textoAParrafoJustificado(e){if(!e)return"";let t=e.split(/\n\s*\n/);return 1===t.length&&(t=e.split(/\n/)),t.map(e=>`<p>${e.trim()}</p>`).join("")}function agendaVacia(e){return!(e.fecha&&e.nombre&&(e.organizador||e.deporte))}let agendaData=[],agendaFiltrada=[],currentPage=1;const eventsPerPage=6,SHEET_URL="https://docs.google.com/spreadsheets/d/17H2xueOlfBdsWDLspy8PWRMRFqbuEpQhA0VkUjSczxc/gviz/tq?tqx=out:json&sheet=agenda_deportiva_grl";let fetchAttempts=0;const maxFetchAttempts=3;function showLoading(e=!0){document.getElementById("loading-indicator").style.display=e?"block":"none"}function showRetry(e=!0){document.getElementById("retry-container").style.display=e?"block":"none"}function loadAgenda(e=!1){showLoading(!0),showRetry(!1),document.getElementById("events").innerHTML="",fetchAttempts=e?1:fetchAttempts+1,fetch(SHEET_URL).then(e=>e.text()).then(e=>{showLoading(!1),showRetry(!1);const t=JSON.parse(e.substr(47).slice(0,-2)).table.rows;agendaData=[];for(let e=0;e<t.length;e++){const r=t[e].c,a=r[0]?r[0].v:"";if(!esAprobado(a))continue;const n=r[1]?r[1].v:"",o=r[2]?r[2].v:"",i=r[3]?r[3].v:"",l=r[4]?r[4].v:"",d=r[5]?r[5].v:"",c=r[6]?r[6].v:"";if(c&&c.toLowerCase().includes("fuera del partido de dolores"))continue;const s=r[7]?r[7].v:"",u=r[8]?r[8].v:"",g=r[9]?r[9].v:"",m=r[10]?r[10].v:"",h=r[11]?r[11].v:"",f=r[12]?r[12].v:"",p=r[13]?r[13].v:"",v=r[14]?r[14].v:"",b=r[15]?r[15].v:"",y=r[16]?r[16].v:"",w=r[17]?r[17].v:"",k=r[18]?r[18].v:"",A=r[19]?r[19].v:"";agendaData.push({verificado:a,fecha:n,hora:o,deporte:i,categoria:l,nombre:d,ubicacion:c,lugar:s,descripcion:u,info_adicional:g,organizador:m,logo:h,organizador2:f,logo2:p,organizador3:v,logo3:b,organizador4:y,logo4:w,auspiciantes:k,enlace:A})}agendaFiltrada=agendaData.filter(e=>!agendaVacia(e)),renderAgenda(agendaFiltrada,currentPage)}).catch(e=>{showLoading(!1),fetchAttempts<maxFetchAttempts?setTimeout(()=>loadAgenda(),1500):(document.getElementById("events").innerHTML=`<p style="color:#b02a2a; font-weight:bold">No se pudieron cargar los eventos deportivos. Verifica que la hoja esté publicada y disponible.<br>Error: ${e}</p>`,showRetry(!0))})}function aplicarFiltro(e){const t=e.trim().toLowerCase(),r=currentPage;agendaFiltrada=agendaData.filter(e=>{if(agendaVacia(e))return!1;if(e.ubicacion&&e.ubicacion.toLowerCase().includes("fuera del partido de dolores"))return!1;if(!t)return!0;const r=[formatoFechaCompleto(e.fecha),e.hora,e.deporte,e.categoria,e.nombre,e.lugar,e.descripcion,e.info_adicional,e.organizador,e.organizador2,e.organizador3,e.organizador4,e.auspiciantes].join(" ").toLowerCase();return r.includes(t)});const a=Math.max(1,Math.ceil(agendaFiltrada.length/eventsPerPage));currentPage=r>a?a:r,renderAgenda(agendaFiltrada,currentPage),scrollToEvents()}function renderAgenda(e,t=1){const r=document.getElementById("events");r.innerHTML="";let a=0;const n=(t-1)*eventsPerPage,o=n+eventsPerPage,i=e.slice(n,o);i.forEach((e,t)=>{if(agendaVacia(e))return;const t=document.createElement("div");t.className="event-card";let n="";if(e.logo||e.organizador){n='<div class="event-logos-row">',e.logo?n+=`<div class="event-logo-organizer-block"><img class="event-logo-main" src="${e.logo}" alt="Logo ${e.organizador||"organizador"}">${e.organizador?`<span class="event-main-organizer">${e.organizador}</span>`:""}</div>`:e.organizador&&(n+=`<div class="event-logo-organizer-block"><span class="event-main-organizer">${e.organizador}</span></div>`),e.logo2&&(n+=`<img class="event-logo" src="${e.logo2}" alt="Logo ${e.organizador2||""}">`),e.logo3&&(n+=`<img class="event-logo" src="${e.logo3}" alt="Logo ${e.organizador3||""}">`),e.logo4&&(n+=`<img class="event-logo" src="${e.logo4}" alt="Logo ${e.organizador4||""}">`),n+="</div>"}let o="";(e.deporte||e.categoria)&&(o='<div class="event-category-block">',e.deporte&&(o+=`<span class="event-deporte"><i class="ri-football-line"></i>${e.deporte}</span>`),e.categoria&&(o+=`<span class="event-category"><i class="ri-price-tag-3-line"></i>${e.categoria}</span>`),o+="</div>");let i="";(e.fecha||e.hora)&&(i='<div class="event-date-row">',e.fecha&&(i+=`<span class="event-date"><i class="ri-calendar-event-line"></i> ${formatoFechaCompleto(e.fecha)}</span>`),e.hora&&(i+=`<span class="event-time"><i class="ri-time-line"></i> ${e.hora}</span>`),i+="</div>");let l=e.nombre?`<div class="event-title">${e.nombre}</div>`:"",d="";e.lugar&&(d+=`<div class="event-info-row event-location"><span class="icon"><i class="ri-map-pin-line"></i></span><span>${e.lugar}</span></div>`);let c=[];e.organizador2&&c.push(e.organizador2),e.organizador3&&c.push(e.organizador3),e.organizador4&&c.push(e.organizador4),c.length>0&&(d+=`<div class="event-info-row event-organizer"><span class="icon"><i class="ri-user-line"></i></span><span>${c.join(" / ")}</span></div>`),e.descripcion&&(d+=`<div class="event-description"><span class="desc-icon"><i class="ri-information-line"></i></span>${textoAParrafoJustificado(e.descripcion)}</div>`),e.info_adicional&&(d+=`<div class="event-info-adicional"><span class="icon"><i class="ri-alert-line"></i></span><span>${e.info_adicional}</span></div>`),e.valor&&(d+=`<div class="event-info-row event-value"><span class="icon"><i class="ri-money-dollar-circle-line"></i></span><span>${e.valor}</span></div>`);let s="";e.auspiciantes&&(s=`<div class="event-sponsors"><i class="ri-star-line"></i> ${e.auspiciantes}</div>`);let u="";e.enlace&&"string"==typeof e.enlace&&""!==e.enlace.trim()&&(u=`<button class="event-link" type="button" onclick="abrirEnlaceModal(this.getAttribute('data-url'))" data-url="${e.enlace.replace(/"/g,"&quot;")}">Más info / Inscripción</button>`),t.innerHTML=`${n}${o}${i}${l}${d}${s}${u}`,r.appendChild(t),a++}),renderPaginator(e.length,t),0===a&&(r.innerHTML="<p style='color:#b02a2a; font-weight:bold'>No hay eventos deportivos para mostrar con ese criterio de búsqueda.</p>")}function renderPaginator(e,t){const r=document.getElementById("paginator"),a=Math.ceil(e/eventsPerPage);a<=1?(r.innerHTML=""):r.innerHTML=`<button id="prevPage" ${t<=1?"disabled":""}>Anterior</button><span class="page-info">Página ${t} / ${a}</span><button id="nextPage" ${t>=a?"disabled":""}>Siguiente</button>`,document.getElementById("prevPage").onclick=()=>{currentPage>1&&(currentPage--,renderAgenda(agendaFiltrada,currentPage),scrollToEvents())},document.getElementById("nextPage").onclick=()=>{currentPage<a&&(currentPage++,renderAgenda(agendaFiltrada,currentPage),scrollToEvents())}}function scrollToEvents(){const e=document.getElementById("events");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}loadAgenda();document.getElementById("search").addEventListener("input",function(){aplicarFiltro(this.value)});function abrirEnlaceModal(e){document.getElementById("modalIframe").src=e,document.getElementById("enlaceModal").style.display="flex"}document.getElementById("cerrarModal").onclick=function(){document.getElementById("enlaceModal").style.display="none",document.getElementById("modalIframe").src=""},document.getElementById("enlaceModal").onclick=function(e){e.target===this&&(document.getElementById("enlaceModal").style.display="none",document.getElementById("modalIframe").src="")};</script></body></html>
